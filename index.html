<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Shantell+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
    <title>Happy Birthday princess</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* * ======================================
          * BASE & ANIMATION STYLES (COMMON & GLOBAL)
          * ======================================
          */

        /* General Body Styling & Background */
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);

            font-family: "Shantell Sans", cursive;
            color: #fff;
            overflow: hidden;
            position: relative;
        }

        /* Background Animated Glow (unchanged) */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 10% 20%, rgba(255, 0, 150, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(0, 200, 255, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 50% 10%, rgba(255, 255, 0, 0.1) 0%, transparent 50%);
            animation: backgroundGlow 15s ease-in-out infinite alternate;
            z-index: 1;
        }

        @keyframes backgroundGlow {

            0% {
                transform: scale(1);
                opacity: 0.8;
            }

            100% {
                transform: scale(1.1);
                opacity: 1;
            }
        }

        /* Sparkle Overlay (Original white dots - retained) */
        .sparkle-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .sparkle-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 2px;
            height: 2px;
            background: #ffddff;
            border-radius: 50%;
            box-shadow: 10vw 40vh 0 0.5px #fff, 20vw 80vh 0 0.5px #ffddff, 30vw 10vh 0 1px #fff, 40vw 60vh 0 0.5px #ffddff, 50vw 30vh 0 1px #fff, 60vw 90vh 0 0.5px #ffddff, 70vw 20vh 0 1px #fff, 80vw 50vh 0 0.5px #ffddff, 90vw 75vh 0 1px #fff, 5vw 15vh 0 0.5px #ffddff, 95vw 5vh 0 1px #fff, 45vw 85vh 0 0.5px #ffddff, 85vw 30vh 0 1px #fff, 15vw 50vh 0 0.5px #ffddff, 75vw 95vh 0 1px #fff, 25vw 5vh 0 0.5px #ffddff, 12vw 62vh 0 0.75px #fff, 58vw 18vh 0 0.75px #ffddff, 35vw 45vh 0 0.5px #fff, 78vw 82vh 0 1px #ffddff, 4vw 38vh 0 0.75px #fff, 68vw 68vh 0 0.5px #ffddff, 92vw 42vh 0 1px #fff, 22vw 32vh 0 0.75px #ffddff, 55vw 55vh 0 0.5px #fff, 18vw 88vh 0 1px #ffddff, 88vw 12vh 0 0.75px #fff, 38vw 98vh 0 0.5px #ffddff;
            animation: sparkleMove 20s linear infinite, sparkleFade 3s ease-in-out infinite alternate;
        }

        @keyframes sparkleMove {

            0% {
                transform: translate(0, 0) scale(1);
            }

            100% {
                transform: translate(100px, 100px) scale(1.1);
            }
        }

        @keyframes sparkleFade {

            0% {
                opacity: 0.2;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.2;
            }
        }

        /* === HEART SPARKLE LAYER (SUBTLE MOVEMENT) === */
        .heart-sparkle-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            overflow: hidden;
            animation: backgroundGlow 15s ease-in-out infinite alternate;
        }

        /* KEYFRAME: SUBTLE SHIFT (Matching the movement style of .sparkle-overlay) */
        @keyframes floatHeart {
            0% {
                transform: translate(0px, 0px) scale(0.9) rotate(0deg);
                opacity: 0.2;
            }

            50% {
                transform: translate(50px, 50px) scale(1.1) rotate(15deg);
                opacity: 1;
            }

            100% {
                transform: translate(100px, 100px) scale(0.9) rotate(0deg);
                opacity: 0.2;
            }
        }

        .heart-sparkle-layer .heart {
            position: absolute;
            color: #ff0059;
            text-shadow: 0 0 5px rgba(255, 0, 90, 0.8);
            animation: floatHeart 10s linear infinite alternate;
            font-size: clamp(0.3rem, 1vw + 0.5rem, 1.5rem);
        }

        /* High-Density Staggering for Random Sparkle Effect (30 Hearts) */
        .heart-sparkle-layer .heart:nth-child(1) {
            top: 80vh;
            left: 10vw;
            animation-delay: 0s;
            animation-duration: 10s;
        }

        .heart-sparkle-layer .heart:nth-child(2) {
            top: 10vh;
            left: 90vw;
            animation-delay: 1s;
            animation-duration: 12s;
            font-size: 1rem;
        }

        .heart-sparkle-layer .heart:nth-child(3) {
            top: 40vh;
            left: 45vw;
            animation-delay: 2s;
            animation-duration: 9s;
        }

        .heart-sparkle-layer .heart:nth-child(4) {
            top: 70vh;
            left: 60vw;
            animation-delay: 3s;
            animation-duration: 11s;
            font-size: 1.2rem;
        }

        .heart-sparkle-layer .heart:nth-child(5) {
            top: 5vh;
            left: 30vw;
            animation-delay: 4s;
            animation-duration: 8s;
        }

        .heart-sparkle-layer .heart:nth-child(6) {
            top: 90vh;
            left: 75vw;
            animation-delay: 5s;
            animation-duration: 13s;
            font-size: 0.8rem;
        }

        .heart-sparkle-layer .heart:nth-child(7) {
            top: 25vh;
            left: 5vw;
            animation-delay: 6s;
            animation-duration: 10s;
        }

        .heart-sparkle-layer .heart:nth-child(8) {
            top: 55vh;
            left: 20vw;
            animation-delay: 0.5s;
            animation-duration: 12.5s;
            font-size: 0.7rem;
        }

        .heart-sparkle-layer .heart:nth-child(9) {
            top: 15vh;
            left: 50vw;
            animation-delay: 1.5s;
            animation-duration: 9.5s;
        }

        .heart-sparkle-layer .heart:nth-child(10) {
            top: 95vh;
            left: 40vw;
            animation-delay: 2.5s;
            animation-duration: 11.5s;
            font-size: 1.1rem;
        }

        .heart-sparkle-layer .heart:nth-child(11) {
            top: 30vh;
            left: 80vw;
            animation-delay: 3.5s;
            animation-duration: 8.5s;
        }

        .heart-sparkle-layer .heart:nth-child(12) {
            top: 85vh;
            left: 5vw;
            animation-delay: 4.5s;
            animation-duration: 12s;
            font-size: 0.9rem;
        }

        .heart-sparkle-layer .heart:nth-child(13) {
            top: 50vh;
            left: 70vw;
            animation-delay: 5.5s;
            animation-duration: 13.5s;
        }

        .heart-sparkle-layer .heart:nth-child(14) {
            top: 20vh;
            left: 15vw;
            animation-delay: 6.5s;
            animation-duration: 10.5s;
            font-size: 1.3rem;
        }

        .heart-sparkle-layer .heart:nth-child(15) {
            top: 60vh;
            left: 95vw;
            animation-delay: 7.5s;
            animation-duration: 8s;
        }

        .heart-sparkle-layer .heart:nth-child(16) {
            top: 75vh;
            left: 30vw;
            animation-delay: 8.5s;
            animation-duration: 12.8s;
            font-size: 0.6rem;
        }

        .heart-sparkle-layer .heart:nth-child(17) {
            top: 35vh;
            left: 65vw;
            animation-delay: 9.5s;
            animation-duration: 9s;
        }

        .heart-sparkle-layer .heart:nth-child(18) {
            top: 10vh;
            left: 5vw;
            animation-delay: 10.5s;
            animation-duration: 11s;
        }

        .heart-sparkle-layer .heart:nth-child(19) {
            top: 80vh;
            left: 90vw;
            animation-delay: 11.5s;
            animation-duration: 13s;
            font-size: 1.1rem;
        }

        .heart-sparkle-layer .heart:nth-child(20) {
            top: 45vh;
            left: 10vw;
            animation-delay: 12.5s;
            animation-duration: 8.5s;
        }

        .heart-sparkle-layer .heart:nth-child(21) {
            top: 5vh;
            left: 5vw;
            animation-delay: 0.2s;
            animation-duration: 9s;
            font-size: 0.4rem;
        }

        .heart-sparkle-layer .heart:nth-child(22) {
            top: 90vh;
            left: 20vw;
            animation-delay: 1.2s;
            animation-duration: 11s;
            font-size: 0.45rem;
        }

        .heart-sparkle-layer .heart:nth-child(23) {
            top: 60vh;
            left: 85vw;
            animation-delay: 2.2s;
            animation-duration: 10s;
            font-size: 0.35rem;
        }

        .heart-sparkle-layer .heart:nth-child(24) {
            top: 20vh;
            left: 40vw;
            animation-delay: 3.2s;
            animation-duration: 13s;
            font-size: 0.4rem;
        }

        .heart-sparkle-layer .heart:nth-child(25) {
            top: 70vh;
            left: 95vw;
            animation-delay: 4.2s;
            animation-duration: 9.5s;
            font-size: 0.5rem;
        }

        .heart-sparkle-layer .heart:nth-child(26) {
            top: 30vh;
            left: 75vw;
            animation-delay: 5.2s;
            animation-duration: 10.8s;
            font-size: 0.3rem;
        }

        .heart-sparkle-layer .heart:nth-child(27) {
            top: 85vh;
            left: 50vw;
            animation-delay: 6.2s;
            animation-duration: 11.2s;
            font-size: 0.45rem;
        }

        .heart-sparkle-layer .heart:nth-child(28) {
            top: 15vh;
            left: 25vw;
            animation-delay: 7.2s;
            animation-duration: 8.2s;
            font-size: 0.4rem;
        }

        .heart-sparkle-layer .heart:nth-child(29) {
            top: 40vh;
            left: 5vw;
            animation-delay: 8.2s;
            animation-duration: 12.4s;
            font-size: 0.5rem;
        }

        .heart-sparkle-layer .heart:nth-child(30) {
            top: 95vh;
            left: 70vw;
            animation-delay: 9.2s;
            animation-duration: 9.8s;
            font-size: 0.35rem;
        }

        /* Existing custom animations (retained for the main heart and text) */
        @keyframes floatAnim {
            0% {
                transform: translateX(0px) scale(1);
            }

            50% {
                transform: translateX(5px) scale(1.02);
            }

            100% {
                transform: translateX(0px) scale(1);
            }
        }

        @keyframes heartBeat {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .animate-float {
            animation: floatAnim 1s infinite alternate;
        }

        .animate-pulse-heart {
            animation: heartBeat 1s infinite ease-in-out;
        }

        .animate-float-reverse {
            animation: floatAnim 3s infinite alternate reverse;
        }


        /* --- WRAPPERS FOR TRANSITION LOGIC --- */
        #loading-page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 1;
            transition: opacity 1s ease-in-out;
            z-index: 50;
        }

        #secret-gateway {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;

            opacity: 0;
            transform: translateX(-20px);
            transition: opacity 1s ease-in-out, transform 1s ease-in-out;
            z-index: 40;
        }

        .hidden {
            display: none !important;
        }

        /* -------------------------------------- */


        /* === LOADING PAGE CONTENT STYLES === */
        .title-loading {
            font-size: 3rem;
            color: #e2e2e2;
            text-shadow: 0 0 8px #ff43a1, 0 0 10px #c239fd;
            animation: textPulse 3s infinite alternate;
            z-index: 10;
        }

        .main-heart-glow {
            filter: drop-shadow(0 0 8px rgba(255, 0, 90, 0.8)) drop-shadow(0 0 12px rgba(255, 0, 90, 0.6));
        }

        .progress-bar {
            height: 100%;
            width: 10px;
            background: linear-gradient(90deg, #b300ff, #ff007f);
            animation: fillProgress 4s forwards;
        }

        @keyframes fillProgress {
            to {
                width: 100%;
            }
        }

        /* ----------------------------------- */


        /* === GATEWAY PAGE CONTENT STYLES (EXACTLY AS PROVIDED BY USER) === */
        /* üåü NEW: Temporary Center Message Style üåü */
        #temp-message {
            position: fixed;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%);

            color: white;
            background: none;

            /* Subtly glowing text */
            text-shadow: 0 0 5px #ffc0cb;

            padding: 10px 20px;
            font-size: 1.2rem;
            /* Paragraph size */
            font-weight: normal;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0s 0.3s;
        }

        #temp-message.show {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease-in-out;
        }


        /* Main Gateway Card (FIXED HEIGHT) */
        .gateway-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px 40px;
            text-align: center;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            max-width: 490px;
            width: 100%;
            position: relative;
            z-index: 10;
            color: #e0e0e0;

            height: 510px;
            transition: transform 1s ease-in-out;
            overflow: hidden;
        }

        /* Padlock Icon (Static) */
        .padlock-icon {
            font-size: 3.5rem;
            color: #ff69b4;
            margin-bottom: 15px;
            display: block;
        }

        /* üíñ ANIMATED "Secret Gateway" Title üíñ */
        .title-gateway {
            font-size: 2.2rem;
            font-weight: bold;
            color: #e2e2e2;
            text-shadow: 0 0 8px #ff43a1, 0 0 10px #c239fd;
            animation: textPulse 3s infinite alternate;
            margin-bottom: 20px;
        }

        /* NEW: Text Glow Pulse Animation */
        @keyframes textPulse {

            0% {
                text-shadow: 0 0 5px #ffc0cb, 0 0 10px #ff69b4;
            }

            100% {
                text-shadow: 0 0 10px #ffc0cb, 0 0 20px #ff43a1;
            }
        }

      

        /* Main Enter Text */
        .main-text {
            font-size: 1.1rem;
            margin-left: 8px;
            color: #f0f0f0;
            margin-bottom: 15px;
        }

        /* Hint Text (Always Visible, Small Subtitle) */
        .hint-text {
            font-size: 0.85rem;
            color: #ffc0cb;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            min-height: 1.2rem;
            transition: all 0.5s ease-in-out;
        }

        .hint-text .lightbulb-icon {
            color: #ffd700;
            font-size: 1rem;
        }

        /* Error Message Style (DYNAMICALLY APPEARS) */
        #error-message {
            color: #ff3333;
            margin-top: 15px;
            font-weight: bold;
            height: 1.2rem;
            text-shadow: 0 0 5px rgba(255, 51, 51, 0.5);
            display: inline-block;

            opacity: 0;
            transition: opacity 0.2s ease-in-out;
        }

        /* State when error message is visible */
        #error-message.visible {
            opacity: 1;
        }

        /* üå∏ GENTLE SHAKE ANIMATION (1 second, 1 cycle) üå∏ */
        @keyframes shake-card {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        /* Class added to the .gateway-card on error */
        .shake-error {
            animation: shake-card 1s ease-in-out 1;
        }

        /* Rest of the general styling */
        .input-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .code-input {
            width: 60px;
            height: 60px;
            font-size: 2.5rem;
            text-align: center;
            border: none;
            background: none;
            color: #ff69b4;
            outline: none;
            -moz-appearance: textfield;
        }

        .code-input::-webkit-outer-spin-button,
        .code-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .code-input::placeholder {
            color: #ff69b4;
            opacity: 0.7;
        }

        #submit-btn {
            background: linear-gradient(90deg, #ff007f, #b300ff);
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            color: white;
            font-size: 1.2rem;
            font-family: "Shantell Sans", cursive;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 15px rgba(179, 0, 255, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        #submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(179, 0, 255, 0.6);
        }

        .button-heart {
            font-size: 1.3rem;
            color: white;
        }
    </style>
</head>

<body>
    <div class="sparkle-overlay"></div>

    <div class="heart-sparkle-layer">
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>

        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
        <div class="heart">‚ù§Ô∏è</div>
    </div>


    <div id="loading-page">
        <svg class="w-36 h-auto mb-5 text-pink-500 animate-pulse-heart animate-float main-heart-glow"
            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
        </svg>

        <h1 class="title-loading">Creating Magic</h1>
        <p class="subtitle text-xl text-gray-200 mb-10 flex items-center gap-1.5">
            A beautiful surprise is loading ...
            <span class="text-yellow-300 w-6 h-6 animate-float-reverse">üí´</span>
        </p>

        <div class="progress-container w-full max-w-xl h-5 bg-white/20 rounded-full mb-2.5 overflow-hidden">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <p id="loading-percentage" class="text-xl text-pink-300">0%</p>
    </div>


    <div id="secret-gateway" class="hidden">
        <p id="temp-message">Just kidding baccha! üòÇ New one is here üíï</p>

        <div class="gateway-card" id="gateway-card">

            <div>
                <span id="lock-icon" class="padlock-icon">üîí</span>
            </div>

            <h1 class="title-gateway">Secret Gateway</h1>

            <p class="main-text">
                Enter the code to unlock my heart bacchaüíï
            </p>

            <p class="hint-text" id="hint-text">
            </p>

            <form id="password-form">
                <div class="input-group">
                    <input type="number" id="num1" class="code-input" maxlength="1" required placeholder="‚ù§">
                    <input type="number" id="num2" class="code-input" maxlength="1" required placeholder="‚ù§">
                    <input type="number" id="num3" class="code-input" maxlength="1" required placeholder="‚ù§">
                </div>

                <button type="submit" id="submit-btn">
                    <span class="button-heart">‚ù§</span>
                    Unlock My Heart
                    <span class="button-heart">‚ù§</span>
                </button>
            </form>

            <p id="error-message" class="error-text"></p>
        </div>
    </div>


    <script>
      
       document.addEventListener('DOMContentLoaded', () => {
            // --- GLOBAL SCOPE ELEMENTS (Accessed by both loading and gateway logic) ---
            const loadingPage = document.getElementById('loading-page');
            const percentageText = document.getElementById('loading-percentage');
            const secretGateway = document.getElementById('secret-gateway');
            const form = document.getElementById('password-form');
            const gatewayCard = document.getElementById('gateway-card');
            const inputs = document.querySelectorAll('.code-input');
            const errorMessage = document.getElementById('error-message');
            const hintText = document.getElementById('hint-text');
            const tempMessage = document.getElementById('temp-message');

            // --- CORE LOGIC VARIABLES ---
            const loadingDuration = 4000;
            const intervalTime = 40;
            const SECRET_CODE = "284";
            const SHAKE_DURATION_MS = 1000;
            let currentPercentage = 0;
            let percentageInterval;
            let attemptCount = 0;

            // --- Hint State Definitions (Kept here for access by updateHint) ---
            const HINT_STATE_0 = 'Your name\'s first three letters in alphabetic number';
            const HINT_STATE_1 = 'Three numbers, between 25-30 and Month no.';
            const HINT_STATE_2 = 'Date when we met (DDM), Call me if stuck!';

            // --- Shared Functions ---
            const updateHint = (hint) => {
                hintText.innerHTML = `<span class="lightbulb-icon">üí°</span>Hint: ${hint}`;
            };

            const showKiddingMessage = () => {
                tempMessage.classList.add('show');
                setTimeout(() => {
                    tempMessage.classList.remove('show');
                }, 2000);
            };

            // --- LOADING PAGE SEQUENCE (Runs first) ---
            const updatePercentage = () => {
                if (currentPercentage < 99) {
                    currentPercentage += 1;
                }
                percentageText.textContent = `${currentPercentage}%`;
            };

            percentageInterval = setInterval(updatePercentage, intervalTime);

            setTimeout(() => {
                clearInterval(percentageInterval);
                percentageText.textContent = '100%';

                // 1. Start Fade-Out of Loading Content
                loadingPage.style.opacity = 0;

                // 2. Wait for Fade-Out (1 second)
                setTimeout(() => {
                    loadingPage.classList.add('hidden');

                    // 3. Show Gateway Wrapper (Starts at opacity: 0, translateX(-20px) in CSS)
                    secretGateway.classList.remove('hidden');

                    // 4. Trigger Fade-In/Slide-In Transition on Gateway
                    // NOTE: This successfully triggers the CSS transition on #secret-gateway
                    secretGateway.style.opacity = 1;
                    secretGateway.style.transform = 'translateX(0)';

                    // Set initial state for the gateway
                    updateHint(HINT_STATE_0);
                    inputs[0].focus();
                }, 1000);

            }, loadingDuration + 100);

            // --- GATEWAY INTERACTIVITY SETUP ---

            // Input handling for auto-focus (unchanged)
            inputs.forEach((input, index) => {
                input.addEventListener('input', () => {
                    if (input.value.length > 1) { input.value = input.value.slice(0, 1); }
                    if (input.value && index < inputs.length - 1) { inputs[index + 1].focus(); }
                });

                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && input.value.length === 0 && index > 0) {
                        inputs[index - 1].focus();
                    }
                });
            });

            // Handle form submission and validation
            form.addEventListener('submit', (e) => {
                e.preventDefault();

                let enteredCode = '';
                inputs.forEach(input => { enteredCode += input.value; });

                // --- Clear previous state ---
                errorMessage.textContent = '';
                errorMessage.classList.remove('visible');
                gatewayCard.classList.remove('shake-error');
                inputs.forEach(input => input.value = ''); // Clear inputs immediately on submission
                inputs[0].focus();

                if (enteredCode === SECRET_CODE) {
                    // **CORRECT PASSWORD** - Redirect on success
                    document.getElementById('lock-icon').textContent = 'üîì';
                    errorMessage.textContent = '‚úÖ Heart Unlocked! Redirecting...';
                    errorMessage.classList.add('visible');
                    setTimeout(() => {
                        window.location.href = "cake.html?autoplay=true";
                    }, 1500);


                } else {
                    // **INCORRECT PASSWORD** - Shake the card, increment count, and update hint

                    attemptCount++; // Increment attempt counter

                    // 1. Update Hint Text based on attempt count
                    if (attemptCount === 2) {
                        showKiddingMessage();
                        setTimeout(() => {
                            updateHint(HINT_STATE_1, true);
                        }, 2000);
                    } else if (attemptCount === 3) {
                        updateHint(HINT_STATE_2, true);
                    }

                    // 2. Set and Reveal the error message
                    errorMessage.textContent = 'üíî Incorrect Key. Try Again! üíî';
                    errorMessage.classList.add('visible');

                    // 3. Start the shake animation immediately
                    gatewayCard.classList.add('shake-error');

                    // 4. Clear shake after 1 second
                    setTimeout(() => {
                        gatewayCard.classList.remove('shake-error');
                    }, SHAKE_DURATION_MS);
                }
            });
        });

    </script>
</body>

</html>